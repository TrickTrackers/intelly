<div>

    <li class="nav-item  waves-effect waves-light" [routerLinkActive]="['active']"
        [routerLinkActiveOptions]="{exact:true}">
        <a class="nav-link" href="javascript:void(0)" (click)="showDialog()">
            <i class="fa fa-cog  fa-lg mt-3 mr-1 headermenu-icon"></i>
            <span class="headermenu_txt">Preferences</span></a>
    </li>

    <p-dialog [(visible)]="display" [modal]="true" [responsive]="true" appendTo="body" [width]="1000" [positionTop]="50"
        [closable]="false">
        <p-header>
            Preferences
            <a (click)="close_preference();" id="btn_exit" style="float: right;cursor:pointer;" class="btn_exit_12">
                <i style="font-size:14px" class="fa">&#xf00d;</i>
            </a>
        </p-header>

        <div id="Preference_content">
            <div style="text-align:left;">
                <tabset #modulesubTabset class="sub_tab_container">
                    <tab id="preference_general" heading="General" class="custom_tabs">
                        <p-panel styleClass="green_panel m-r-20">
                            <p-header>
                                <div class="ui-helper-clearfix">
                                    <span class="ui-panel-title"
                                        style="display:inline-block;margin-top:2px">General</span>
                                </div>
                            </p-header>
                            <div class="strat-panel">
                                <p-checkbox binary="true" id="chkdrag" name="chkdrag"
                                    label="When selected, modules can be single clicked to open. Drag and Drop is still enabled."
                                    [(ngModel)]="preference.defaultMouseClick" (onChange)="updatePreferenceSettings()">
                                </p-checkbox>
                                <br>
                                <p-checkbox binary="true" id="chknavi" name="chknavi"
                                    [(ngModel)]="preference.displayMenu" label="Hide the left side Modules List."
                                    (onChange)="updatePreferenceSettings()" [disabled]="queryparams.mode == 'E'">
                                </p-checkbox>
                                <br>
                                <label style="font-weight:bold">Select Date Format </label>
                                <br>
                                <p-dropdown [options]="dateformatList" [(ngModel)]="dateformatList_temp"
                                    [style]="{'width':'25%'}" optionLabel="name" appendTo="body" filter="true"
                                    (onChange)="updatePreferenceSettings()">
                                </p-dropdown>
                                <span>{{dateformatList_temp.description}} ({{date_description}})</span>
                                <br>

                            </div>
                        </p-panel>
                    </tab>
                    <tab id="preference_document_default" heading="Documents Defaults" class="custom_tabs">
                        <p-panel styleClass="green_panel m-r-20">
                            <p-header>
                                <div class="ui-helper-clearfix">
                                    <span class="ui-panel-title" style="display:inline-block;margin-top:2px">Documents
                                        Defaults</span>
                                </div>
                            </p-header>
                            <div class="strat-panel">
                                <p style="width:500px;"> Select the applications used to open documents. Google
                                    applications will allow
                                    direct open, edit and save
                                    to the Library, PC applications will allow direct open and edit but will not allow
                                    direct saving to
                                    the
                                    Library
                                </p>
                                <p-radioButton name="groupname" value="1" inputId="googleApp"
                                    [(ngModel)]="preference.defaultDocAccess" label="Google applications"
                                    (click)="updatePreferenceSettings()"></p-radioButton>
                                <br>
                                <p-radioButton name="groupname" value="0" inputId="pcApp"
                                    [(ngModel)]="preference.defaultDocAccess"
                                    label="PC applications (MS Word, Excel,etc.)" (click)="updatePreferenceSettings()">
                                </p-radioButton>
                                <br>
                                <p-checkbox binary="true" name="doc_access"
                                    label="When Documents are accessed (unchecked will Open / checked will Save)"
                                    [(ngModel)]="preference.docAccessType" (onChange)="updatePreferenceSettings()">
                                </p-checkbox>
                                <br>
                            </div>
                        </p-panel>
                    </tab>
                    <tab id="preference_language" heading="Select Language" class="custom_tabs">
                        <p-panel styleClass="green_panel m-r-20">
                            <p-header>
                                <div class="ui-helper-clearfix">
                                    <span class="ui-panel-title" style="display:inline-block;margin-top:2px">Select
                                        Language</span>
                                </div>
                            </p-header>
                            <div class="strat-panel">
                                <div>
                                    <div class="language_holder">
                                        <div class="skiptranslate goog-te-gadget" dir="ltr">
                                            <div>
                                                <select [(ngModel)]="selectedLanguage" (change)="setGoogleLanguage()"
                                                    class="goog-te-combo" aria-label="Language Translate Widget">
                                                    <option value="">Select Language</option>
                                                    <option value="af">Afrikaans</option>
                                                    <option value="sq">Albanian</option>
                                                    <option value="am">Amharic</option>
                                                    <option value="ar">Arabic</option>
                                                    <option value="hy">Armenian</option>
                                                    <option value="az">Azerbaijani</option>
                                                    <option value="eu">Basque</option>
                                                    <option value="be">Belarusian</option>
                                                    <option value="bn">Bengali</option>
                                                    <option value="bs">Bosnian</option>
                                                    <option value="bg">Bulgarian</option>
                                                    <option value="ca">Catalan</option>
                                                    <option value="ceb">Cebuano</option>
                                                    <option value="ny">Chichewa</option>
                                                    <option value="zh-CN">Chinese (Simplified)</option>
                                                    <option value="zh-TW">Chinese (Traditional)</option>
                                                    <option value="co">Corsican</option>
                                                    <option value="hr">Croatian</option>
                                                    <option value="cs">Czech</option>
                                                    <option value="da">Danish</option>
                                                    <option value="nl">Dutch</option>
                                                    <option value="eo">Esperanto</option>
                                                    <option value="et">Estonian</option>
                                                    <option value="tl">Filipino</option>
                                                    <option value="fi">Finnish</option>
                                                    <option value="fr">French</option>
                                                    <option value="fy">Frisian</option>
                                                    <option value="gl">Galician</option>
                                                    <option value="ka">Georgian</option>
                                                    <option value="de">German</option>
                                                    <option value="el">Greek</option>
                                                    <option value="gu">Gujarati</option>
                                                    <option value="ht">Haitian Creole</option>
                                                    <option value="ha">Hausa</option>
                                                    <option value="haw">Hawaiian</option>
                                                    <option value="iw">Hebrew</option>
                                                    <option value="hi">Hindi</option>
                                                    <option value="hmn">Hmong</option>
                                                    <option value="hu">Hungarian</option>
                                                    <option value="is">Icelandic</option>
                                                    <option value="ig">Igbo</option>
                                                    <option value="id">Indonesian</option>
                                                    <option value="ga">Irish</option>
                                                    <option value="it">Italian</option>
                                                    <option value="ja">Japanese</option>
                                                    <option value="jw">Javanese</option>
                                                    <option value="kn">Kannada</option>
                                                    <option value="kk">Kazakh</option>
                                                    <option value="km">Khmer</option>
                                                    <option value="ko">Korean</option>
                                                    <option value="ku">Kurdish (Kurmanji)</option>
                                                    <option value="ky">Kyrgyz</option>
                                                    <option value="lo">Lao</option>
                                                    <option value="la">Latin</option>
                                                    <option value="lv">Latvian</option>
                                                    <option value="lt">Lithuanian</option>
                                                    <option value="lb">Luxembourgish</option>
                                                    <option value="mk">Macedonian</option>
                                                    <option value="mg">Malagasy</option>
                                                    <option value="ms">Malay</option>
                                                    <option value="ml">Malayalam</option>
                                                    <option value="mt">Maltese</option>
                                                    <option value="mi">Maori</option>
                                                    <option value="mr">Marathi</option>
                                                    <option value="mn">Mongolian</option>
                                                    <option value="my">Myanmar (Burmese)</option>
                                                    <option value="ne">Nepali</option>
                                                    <option value="no">Norwegian</option>
                                                    <option value="ps">Pashto</option>
                                                    <option value="fa">Persian</option>
                                                    <option value="pl">Polish</option>
                                                    <option value="pt">Portuguese</option>
                                                    <option value="pa">Punjabi</option>
                                                    <option value="ro">Romanian</option>
                                                    <option value="ru">Russian</option>
                                                    <option value="sm">Samoan</option>
                                                    <option value="gd">Scots Gaelic</option>
                                                    <option value="sr">Serbian</option>
                                                    <option value="st">Sesotho</option>
                                                    <option value="sn">Shona</option>
                                                    <option value="sd">Sindhi</option>
                                                    <option value="si">Sinhala</option>
                                                    <option value="sk">Slovak</option>
                                                    <option value="sl">Slovenian</option>
                                                    <option value="so">Somali</option>
                                                    <option value="es">Spanish</option>
                                                    <option value="su">Sundanese</option>
                                                    <option value="sw">Swahili</option>
                                                    <option value="sv">Swedish</option>
                                                    <option value="tg">Tajik</option>
                                                    <option value="ta">Tamil</option>
                                                    <option value="te">Telugu</option>
                                                    <option value="th">Thai</option>
                                                    <option value="tr">Turkish</option>
                                                    <option value="uk">Ukrainian</option>
                                                    <option value="ur">Urdu</option>
                                                    <option value="uz">Uzbek</option>
                                                    <option value="vi">Vietnamese</option>
                                                    <option value="cy">Welsh</option>
                                                    <option value="xh">Xhosa</option>
                                                    <option value="yi">Yiddish</option>
                                                    <option value="yo">Yoruba</option>
                                                    <option value="zu">Zulu</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </p-panel>
                    </tab>
                    <tab id="preference_module_default" heading="Module Defaults" class="custom_tabs">
                        <p-panel styleClass="green_panel m-r-20">
                            <p-header>
                                <div class="ui-helper-clearfix">
                                    <span class="ui-panel-title" style="display:inline-block;margin-top:2px">Module
                                        Defaults</span>
                                </div>
                            </p-header>
                            <div class="strat-panel">
                                <label style="font-weight:bold">Home Module</label>
                                <br />
                                <input (click)="setDefaultModelModule()" id="Lego_Add" value="Select" class="Button_pre"
                                    type="button">
                                <input (click)="revertDefaultModelModule()" id="Lego_clear" value="Clear"
                                    class="Button_pre cancel_pre" type="button"> &nbsp;&nbsp;&nbsp;Make the Current
                                Module become the Home Module
                                when I sign
                                in each
                                time
                                <div *ngIf="displayModuleLevel == true " id="divTopRoot" class="divtotop">
                                    <ul>
                                        <li *ngFor="let m of defaultModelHierarchy;trackBy:index;let i = index; "
                                            class="breadcrumb-item" ng-reflect-klass="breadcrumb-item">
                                            <span class="breadscrumb_lvl">{{ m.legoName }}</span>
                                            <span class="breadscrumb_lvl">lvl - {{ m.legoLevel }}</span>
                                        </li>
                                    </ul>
                                </div>
                                <br />
                                <label style="font-weight:bold">Default Tab</label>
                                <br>
                                <select name="dtab" id="pre_dtab" style="width:121px;"
                                    [(ngModel)]="preference.defaultTab" (change)="updatePreferenceSettings()">
                                    <option value="1">SubModule</option>
                                    <option value="2">Workflow</option>
                                    <option value="3">Connection</option>
                                    <option value="4">Documents</option>
                                    <option value="5">Collaboration</option>
                                    <option value="6">Strategy</option>
                                    <option value="7">Assessment</option>
                                    <option value="8">Performance</option>
                                    <option value="9">Details</option>
                                </select>
                                <br>
                            </div>
                        </p-panel>

                    </tab>
                    <tab id="preference_task_default" heading="Task Defaults" class="custom_tabs">
                        <p-panel styleClass="green_panel m-r-20">
                            <p-header>
                                <div class="ui-helper-clearfix">
                                    <span class="ui-panel-title" style="display:inline-block;margin-top:2px">Task
                                        Defaults</span>
                                </div>
                            </p-header>
                            <div class="strat-panel">
                                <div style="text-align:left;">
                                    <p-checkbox binary="true" name="reorder" label="Reorder using Priority"
                                        [(ngModel)]="preference.isPriority" (onChange)="updatePreferenceSettings()">
                                    </p-checkbox>
                                    <br>
                                    <p-checkbox binary="true" name="def_boards" label="Default to Boards"
                                        [(ngModel)]="preference.isBoardDefault" (onChange)="updatePreferenceSettings()">
                                    </p-checkbox>
                                    <br>
                                    <label>Task Dropdown default</label>
                                    <select name="taskdefault" id="taskfilterdef" style="width:121px;"
                                        [(ngModel)]="preference.taskDefaultFilter"
                                        (change)="updatePreferenceSettings()">
                                        <option value="1">All</option>
                                        <option value="2">Pending</option>
                                        <option value="3">Completed</option>
                                        <option value="4">Archived</option>
                                        <option value="5">My Tasks</option>
                                    </select>

                                </div>
                            </div>
                        </p-panel>
                        <p-panel styleClass="green_panel m-r-20">
                            <p-header>
                                <div class="ui-helper-clearfix">
                                    <span class="ui-panel-title"
                                        style="display:inline-block;margin-top:2px">Label</span>
                                </div>
                            </p-header>
                            <div class="strat-panel" id="labelcss">
                                <div class="row">
                                    <div class="col-lg-10 col-sm-10 col-md-10">
                                        <div class="form-group row">
                                            <label for="lbl_user_name" class="col-sm-2 col-form-label">Personal
                                                Label</label>
                                            <div class="col-sm-7">
                                                <p-dropdown [options]="cmpLabelListDropdown" [filter]="true"
                                                    [style]="{'width':'150px','height':'30px'}"
                                                    [(ngModel)]="preference.labelId" appendTo="body"
                                                    (onChange)="selectedDropdownlabel(preference.labelId, 2)">
                                                    <ng-template let-item pTemplate="item">
                                                        <div class="ui-helper-clearfix select-box">
                                                            <div class="namebatch_left">{{item.label}}</div>
                                                        </div>
                                                    </ng-template>
                                                </p-dropdown>


                                                <button type="button" pButton (click)="addNewlbl_popup()"
                                                    icon="fa fa-plus" label="Add New Label"></button>
                                            </div>

                                        </div>
                                        <div class="form-group row"
                                            *ngIf="preference.labelId != 0 && preference.labelId != undefined && preference.labelId != null">
                                            <!-- *ngIf="preference.labelId != 0 && preference.labelId != undefined && preference.labelId != null"> -->
                                            <label for="lbl_user_name" class="col-sm-2 col-form-label"></label>
                                            <div class="col-sm-5">
                                                <div class="color_pickercontainer">
                                                    <div class="d-flex  bd-highlight mb-3 ganttchart_option"
                                                        style="margin-bottom: 2px !important;">
                                                        <div class="color_pickerspan p-2"
                                                            *ngFor="let colors of selectedcolor_list;trackBy:index;let i=index">

                                                            <span class="color_pickerspan_inner"
                                                                [style.background]="colors.name">
                                                            </span>
                                                        </div>

                                                        <div class="p-2">
                                                            <i class="fa fa-pencil-square-o fa-lg"
                                                                *ngIf="labelUser == userinfo.EmployeeId"
                                                                style="font-size: 20px;cursor:pointer;padding-left:5px;font-weight: bold;"
                                                                aria-hidden="true"
                                                                (click)="editlbl_popup(colors, preference.labelId)"></i>
                                                        </div>
                                                        <div class="p-2"
                                                            style="padding-left: 0px !important;padding-top: 7px !important;">
                                                            <i class="fa fa-trash-o fa-lg"
                                                                *ngIf="labelUser == userinfo.EmployeeId"
                                                                style="font-size: 20px;cursor:pointer;font-weight: bold;"
                                                                aria-hidden="true"
                                                                (click)="DeleteLabel(preference.labelId)"></i>
                                                        </div>
                                                    </div>

                                                    <!-- <i class="fa fa-pencil-square-o fa-lg"
                                                        *ngIf="labelUser == userinfo.EmployeeId"
                                                        style="font-size: 20px;cursor:pointer;padding-left:5px;font-weight: bold;"
                                                        aria-hidden="true"
                                                        (click)="editlbl_popup(colors, preference.labelId)"></i>
                                                   
                                                    <i class="fa fa-trash-o fa-lg"
                                                        *ngIf="labelUser == userinfo.EmployeeId"
                                                        style="font-size: 22px;cursor:pointer;padding-left:5px;font-weight: bold;"
                                                        aria-hidden="true"
                                                        (click)="DeleteLabel(preference.labelId)"></i> -->
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- <label>Company Label</label>

                                <p-dropdown [options]="cmpLabelListDropdown" [style]="{'width':'150px','height':'30px'}"
                                    required [(ngModel)]="preference.labelId" appendTo="body"
                                    (onChange)="selectedDropdownlabel(preference.labelId, 2)">
                                    <ng-template let-item pTemplate="item">
                                        <div class="ui-helper-clearfix select-box">
                                            <div class="elipsis_div">{{item.label}}</div>
                                        </div>
                                    </ng-template>
                                </p-dropdown>
                                <div class="color_pickercontainer">
                                    <div class="color_pickerspan" *ngFor="let colors of selectedcolor_list;let i=index">

                                        <span class="color_pickerspan_inner" [style.background]="colors.name">
                                        </span>

                                    </div>
                                </div> -->

                                <!-- <br> -->
                                <!-- <button type="button" (click)="addNewlbl_popup()" label=" Add Label"
                                    class="btn btn-sm"><i class="fa fa-plus"></i> Add Label</button> -->
                            </div>
                        </p-panel>
                        <p-panel styleClass="green_panel m-r-20">
                            <p-header>
                                <div class="ui-helper-clearfix">
                                    <span class="ui-panel-title" style="display:inline-block;margin-top:2px">Gantt
                                        Charts</span>
                                </div>
                            </p-header>
                            <div class="strat-panel">
                                <div class="row">
                                    <div class="col-lg-12 col-sm-12 col-md-12">
                                        <div class="form-group row">
                                            <div class="col-sm-7">

                                                <div class="d-flex  bd-highlight mb-3 ganttchart_option"
                                                    style="margin-bottom: 2px !important;">
                                                    <div class="p-2" style="padding-left: 0px !important;">
                                                        <p-radioButton name="group1" value="1" label="Days"
                                                            (click)="updatePreferenceSettings()"
                                                            [(ngModel)]="preference.ganttScale" inputId="preopt4">
                                                        </p-radioButton>
                                                    </div>
                                                    <div class="p-2 ">
                                                        <p-radioButton name="group1" value="2" label="Weeks"
                                                            (click)="updatePreferenceSettings()"
                                                            [(ngModel)]="preference.ganttScale" inputId="preopt5">
                                                        </p-radioButton>
                                                    </div>
                                                    <div class="p-2 ">
                                                        <p-radioButton name="group1" value="3" label="Months"
                                                            (click)="updatePreferenceSettings()"
                                                            [(ngModel)]="preference.ganttScale" inputId="preopt6">
                                                        </p-radioButton>
                                                    </div>
                                                </div>

                                            </div>

                                        </div>
                                        <!-- <div class="form-group row">
                                            <div class="col-sm-12">
                                                <p-checkbox binary="true" name="ganttShrunk" label="Start date, End date, Responsibility in Gantt Chart (unchecked will Shrunk / checked will Expand)" [(ngModel)]="ganttShrunk">
                                                </p-checkbox>
                                            </div>                                            
                                        </div> -->
                                        <div class="form-group row">
                                            <div class="col-sm-12">
                                                <p-checkbox binary="true" name="ganttTask"
                                                    label="All Tasks in Gantt Charts (unchecked will Shrunk / checked will Expand)"
                                                    (onChange)="updatePreferenceSettings()"
                                                    [(ngModel)]="preference.isGanttExpand">
                                                </p-checkbox>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </p-panel>
                    </tab>
                    <tab id="preference_message" heading="Messaging" class="custom_tabs" (select)="onSelectTab($event)">
                        <p-panel styleClass="green_panel m-r-20">
                            <p-header>
                                <div class="ui-helper-clearfix">
                                    <span class="ui-panel-title" style="display:inline-block;margin-top:2px">Send
                                        message notices to</span>
                                </div>
                            </p-header>
                            <div class="strat-panel">
                                <div class="form-group row" *ngIf="isShowTextMsg==true">
                                    <div class="col-sm-12">
                                        <p-checkbox binary="true" id="text" name="text" binary="true" label="Text"
                                            [(ngModel)]="preference.isEnableText"
                                            (onChange)="updatePreferenceSettings()">
                                        </p-checkbox>
                                    </div>
                                </div>
                                <div class="form-group row" *ngIf="isShowEmailMsg==true">
                                    <div class="col-sm-12">
                                        <p-checkbox binary="true" id="chkmail" name="chkmail" binary="true"
                                            label="Email" [(ngModel)]="preference.isEnableEmail"
                                            (onChange)="updatePreferenceSettings()">
                                        </p-checkbox>
                                    </div>
                                </div>
                                <div class="form-group row" *ngIf="!isShowTextMsg && !isShowEmailMsg">
                                    <div class="col-sm-12">
                                        <p>Notices have been deactivated by your Master User. Contact
                                            them to activate this feature.</p>
                                    </div>
                                </div>
                            </div>
                        </p-panel>
                    </tab>
                </tabset>
            </div>
        </div>
    </p-dialog>
    <!-- add company label popup -->
    <p-dialog header="{{label_popupheader.title}}" [(visible)]="Addcompanylabel_dialog" [modal]="true" [width]="350"
        [minWidth]="300" [responsive]="true" appendTo="body">
        <div class="form-group row">
            <label class="col-sm-4 required_label">Lable Title</label>
        </div>
        <div class="form-group row">
            <div class="col-sm-12">
                <input *ngIf="label_popupheader.title == 'Add Label'" type="text"
                    (keyup.enter)="AddUpdateLabels(labelTitle, label_popupheader)" class="form-control col-sm-12"
                    [(ngModel)]="labelTitle" placeholder="Label Name" [ngModelOptions]="{standalone: true}">
                <input *ngIf="label_popupheader.title == 'Edit Label'" type="text"
                    (keyup.enter)="UpdateLabels(labelTitle, label_popupheader)" class="form-control col-sm-12"
                    [(ngModel)]="labelTitle" placeholder="Label Name">
            </div>
        </div>
        <div class="form-group row"></div>
        <!-- <div class="row">
                <div class="col-lg-12 col-sm-12 col-md-12"> -->
        <div class="form-group row">
            <label for="lbl_user_name" class="col-sm-4 required_label">Select color</label>
            <div class="col-sm-8">
                <div class="color_pickercontainer">

                    <div class="color_pickerspan" *ngFor="let cmp of new_color_list;let i=index;">
                        <span *ngIf="!cmp.isnew">
                            <span class="color_pickerspan_inner" [style.background]="cmp.name" [cpOutputFormat]="'hex'"
                                [(colorPicker)]="cmp.name"
                                (colorPickerClose)="onChangeCmpColor($event,i,cmp,colorelement)"
                                [cpPosition]="'bottom'">
                            </span>
                        </span>
                    </div>
                </div>
            </div>
        </div>
        <!-- </div>
              </div> -->


        <span class="float-right">
            <!-- <button class="color_pickerspan_inner" #ignoredButton (click)="addCompanyColor();" style="padding-left: 0px; padding-right: 0px; border-bottom-width: 0px; border-top-width: 0px;
        border-right-width: 0px; border-left-width: 2px;"><i class="fa fa-plus"></i></button> -->
        </span>
        <p-footer>
            <p-button icon="fa fa-fw fa-check" label="Save" styleClass="custom_btn"
                *ngIf="label_popupheader.option == 4" (click)="AddUpdateLabels(labelTitle, label_popupheader)">
            </p-button>
            <p-button icon="fa fa-fw fa-check" label="Save" styleClass="custom_btn"
                *ngIf="label_popupheader.option == 5" (click)="UpdateLabels(labelTitle, label_popupheader)">
            </p-button>
            <p-button icon="fa fa-fw fa-close" label="Cancel" styleClass="custom_btn"
                (click)="Addcompanylabel_dialog=false">
            </p-button>
        </p-footer>

    </p-dialog>
</div>
<style>
    .Button_pre {
        background-color: #4CAF50;
        border: none;
        color: white;
        padding: 0 14px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 14px;
        margin: 4px 2px;
        cursor: pointer;
        font-family: "Geogrotesque-Regular";
    }
</style>
<script type="text/javascript">
    // function googleTranslateElementInit() {
    //     new google.translate.TranslateElement({ pageLanguage: 'en' }, 'google_translate_element');
    // }
</script>